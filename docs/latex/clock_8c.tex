\doxysection{src/core/cortex-\/m4/clock/clock.c File Reference}
\hypertarget{clock_8c}{}\label{clock_8c}\index{src/core/cortex-\/m4/clock/clock.c@{src/core/cortex-\/m4/clock/clock.c}}


Cortex-\/\+M4 (STM32\+F4) Clock HAL Implementation.  


{\ttfamily \#include "{}core/cortex-\/m4/clock.\+h"{}}\newline
{\ttfamily \#include "{}core/cortex-\/m4/flash\+\_\+reg.\+h"{}}\newline
{\ttfamily \#include "{}core/cortex-\/m4/rcc\+\_\+reg.\+h"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for clock.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{clock_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{clock_8c_a0968882ff01fef583e6a8b7a97be51ea}{hal\+\_\+clock\+\_\+init}} (\mbox{\hyperlink{structhal__clock__config__t}{hal\+\_\+clock\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{samples_200__test__sample_2main_8c_a921c2505bac76424f5f96cc1e4f62986}{cfg}}, \mbox{\hyperlink{structhal__pll__config__t}{hal\+\_\+pll\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{samples_200__test__sample_2main_8c_adf1b524219e8781fa7542fa90dd09912}{pll\+\_\+cfg}})
\begin{DoxyCompactList}\small\item\em Initialize system clock and bus prescalers. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0}{hal\+\_\+clock\+\_\+get\+\_\+sysclk}} (void)
\begin{DoxyCompactList}\small\item\em Get current system clock (SYSCLK) frequency. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_ac405b089ad197ec8fcec53489064cb5f}{hal\+\_\+clock\+\_\+get\+\_\+ahbclk}} (void)
\begin{DoxyCompactList}\small\item\em Get current AHB bus frequency. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8}{hal\+\_\+clock\+\_\+get\+\_\+apb1clk}} (void)
\begin{DoxyCompactList}\small\item\em Get current APB1 bus frequency. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5}{hal\+\_\+clock\+\_\+get\+\_\+apb2clk}} (void)
\begin{DoxyCompactList}\small\item\em Get current APB2 bus frequency. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Cortex-\/\+M4 (STM32\+F4) Clock HAL Implementation. 

This file provides a hardware abstraction layer for clock configuration on STM32\+F4 microcontrollers. It includes functions to\+:
\begin{DoxyItemize}
\item Initialize system clock sources (HSI, HSE, PLL)
\item Configure PLL parameters (M, N, P, Q factors)
\item Set AHB/\+APB bus prescalers
\item Manage flash wait states
\item Retrieve current clock frequencies for all system buses
\end{DoxyItemize}

\begin{DoxyNote}{Note}
The implementation assumes an STM32\+F4xx microcontroller and uses direct register access for maximum performance and minimal overhead.
\end{DoxyNote}
\begin{DoxyCopyright}{Copyright}
Â© NAVROBOTEC PVT. LTD. 
\end{DoxyCopyright}


\label{doc-func-members}
\Hypertarget{clock_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{clock_8c_ac405b089ad197ec8fcec53489064cb5f}\index{clock.c@{clock.c}!hal\_clock\_get\_ahbclk@{hal\_clock\_get\_ahbclk}}
\index{hal\_clock\_get\_ahbclk@{hal\_clock\_get\_ahbclk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_ahbclk()}{hal\_clock\_get\_ahbclk()}}
{\footnotesize\ttfamily \label{clock_8c_ac405b089ad197ec8fcec53489064cb5f} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+ahbclk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get current AHB bus frequency. 

Get the AHB bus clock frequency.

\begin{DoxyReturn}{Returns}
AHB clock frequency in Hz 
\end{DoxyReturn}
\Hypertarget{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8}\index{clock.c@{clock.c}!hal\_clock\_get\_apb1clk@{hal\_clock\_get\_apb1clk}}
\index{hal\_clock\_get\_apb1clk@{hal\_clock\_get\_apb1clk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_apb1clk()}{hal\_clock\_get\_apb1clk()}}
{\footnotesize\ttfamily \label{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+apb1clk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get current APB1 bus frequency. 

Get the APB1 bus clock frequency.

\begin{DoxyReturn}{Returns}
APB1 clock frequency in Hz 
\end{DoxyReturn}
\Hypertarget{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5}\index{clock.c@{clock.c}!hal\_clock\_get\_apb2clk@{hal\_clock\_get\_apb2clk}}
\index{hal\_clock\_get\_apb2clk@{hal\_clock\_get\_apb2clk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_apb2clk()}{hal\_clock\_get\_apb2clk()}}
{\footnotesize\ttfamily \label{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+apb2clk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get current APB2 bus frequency. 

Get the APB2 bus clock frequency.

\begin{DoxyReturn}{Returns}
APB2 clock frequency in Hz 
\end{DoxyReturn}
\Hypertarget{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0}\index{clock.c@{clock.c}!hal\_clock\_get\_sysclk@{hal\_clock\_get\_sysclk}}
\index{hal\_clock\_get\_sysclk@{hal\_clock\_get\_sysclk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_sysclk()}{hal\_clock\_get\_sysclk()}}
{\footnotesize\ttfamily \label{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+sysclk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get current system clock (SYSCLK) frequency. 

Get the system clock frequency (SYSCLK).

\begin{DoxyReturn}{Returns}
SYSCLK frequency in Hz
\end{DoxyReturn}
Determines SYSCLK frequency based on current clock source\+:
\begin{DoxyItemize}
\item HSI\+: Fixed 16 MHz
\item HSE\+: Fixed 8 MHz
\item PLL\+: Calculated from PLL configuration registers 
\end{DoxyItemize}\Hypertarget{clock_8c_a0968882ff01fef583e6a8b7a97be51ea}\index{clock.c@{clock.c}!hal\_clock\_init@{hal\_clock\_init}}
\index{hal\_clock\_init@{hal\_clock\_init}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_init()}{hal\_clock\_init()}}
{\footnotesize\ttfamily \label{clock_8c_a0968882ff01fef583e6a8b7a97be51ea} 
void hal\+\_\+clock\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structhal__clock__config__t}{hal\+\_\+clock\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{cfg}{, }\item[{\mbox{\hyperlink{structhal__pll__config__t}{hal\+\_\+pll\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{pll\+\_\+cfg}{}\end{DoxyParamCaption})}



Initialize system clock and bus prescalers. 

Initialize the system clock.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{in}}  & {\em cfg} & Pointer to clock configuration structure \\
\hline
\mbox{\texttt{in}}  & {\em pll\+\_\+cfg} & Pointer to PLL configuration structure (required if using PLL)\\
\hline
\end{DoxyParams}
Configures the complete clock tree including\+:
\begin{DoxyItemize}
\item Clock source selection (HSI/\+HSE/\+PLL)
\item PLL configuration (when used)
\item Flash latency settings
\item AHB/\+APB prescalers
\end{DoxyItemize}

\begin{DoxyNote}{Note}
This function will block until clock switches are complete 
\end{DoxyNote}
