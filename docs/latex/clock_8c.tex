\doxysection{src/core/cortex-\/m4/clock/clock.c File Reference}
\hypertarget{clock_8c}{}\label{clock_8c}\index{src/core/cortex-\/m4/clock/clock.c@{src/core/cortex-\/m4/clock/clock.c}}


Cortex-\/\+M4 (STM32\+F4) Clock HAL Implementation.  


{\ttfamily \#include "{}core/cortex-\/m4/clock.\+h"{}}\newline
{\ttfamily \#include "{}core/cortex-\/m4/flash\+\_\+reg.\+h"{}}\newline
{\ttfamily \#include "{}core/cortex-\/m4/rcc\+\_\+reg.\+h"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for clock.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{clock_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{clock_8c_ad1d19ef595b3a08cb3ba2484e8477275}{\+\_\+toggle\+\_\+hse\+\_\+clock}} (uint8\+\_\+t state)
\begin{DoxyCompactList}\small\item\em Initialize system clocks based on the provided configuration. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{clock_8c_ada138812dfee19ee5451814039c13cf1}{\+\_\+toggle\+\_\+hsi\+\_\+clock}} (uint8\+\_\+t state)
\item 
void \mbox{\hyperlink{clock_8c_ac1565e93ef8448d4bb517652e8b85e27}{\+\_\+toggle\+\_\+pll\+\_\+clock}} (uint8\+\_\+t state)
\item 
void \mbox{\hyperlink{clock_8c_a0968882ff01fef583e6a8b7a97be51ea}{hal\+\_\+clock\+\_\+init}} (\mbox{\hyperlink{structhal__clock__config__t}{hal\+\_\+clock\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{samples_200__test__sample_2main_8c_a921c2505bac76424f5f96cc1e4f62986}{cfg}}, \mbox{\hyperlink{structhal__pll__config__t}{hal\+\_\+pll\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{samples_200__test__sample_2main_8c_adf1b524219e8781fa7542fa90dd09912}{pll\+\_\+cfg}})
\begin{DoxyCompactList}\small\item\em Initialize the system clock. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0}{hal\+\_\+clock\+\_\+get\+\_\+sysclk}} (void)
\begin{DoxyCompactList}\small\item\em Get the current system clock frequency in Hz. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_ac405b089ad197ec8fcec53489064cb5f}{hal\+\_\+clock\+\_\+get\+\_\+ahbclk}} (void)
\begin{DoxyCompactList}\small\item\em Get the current AHB clock frequency. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8}{hal\+\_\+clock\+\_\+get\+\_\+apb1clk}} (void)
\begin{DoxyCompactList}\small\item\em Get the current APB1 clock frequency. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5}{hal\+\_\+clock\+\_\+get\+\_\+apb2clk}} (void)
\begin{DoxyCompactList}\small\item\em Get the current APB2 clock frequency. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Cortex-\/\+M4 (STM32\+F4) Clock HAL Implementation. 

Provides functions to initialize and retrieve clock frequencies including SYSCLK, AHB, APB1, and APB2 clocks.

This implementation supports HSI, HSE, and PLL clock sources.

\begin{DoxyAuthor}{Author}
Ashutosh Vishwakarma 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025-\/07-\/21 
\end{DoxyDate}


\label{doc-func-members}
\Hypertarget{clock_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{clock_8c_ad1d19ef595b3a08cb3ba2484e8477275}\index{clock.c@{clock.c}!\_toggle\_hse\_clock@{\_toggle\_hse\_clock}}
\index{\_toggle\_hse\_clock@{\_toggle\_hse\_clock}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{\_toggle\_hse\_clock()}{\_toggle\_hse\_clock()}}
{\footnotesize\ttfamily \label{clock_8c_ad1d19ef595b3a08cb3ba2484e8477275} 
void \+\_\+toggle\+\_\+hse\+\_\+clock (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{state}{}\end{DoxyParamCaption})}



Initialize system clocks based on the provided configuration. 

Enables and waits for the selected clock source (HSI, HSE, or PLL). If PLL is selected, configures PLL parameters and switches system clock source to PLL output.


\begin{DoxyParams}{Parameters}
{\em cfg} & Pointer to clock configuration structure specifying source. \\
\hline
{\em pll\+\_\+cfg} & Pointer to PLL configuration structure (used if source is PLL). \\
\hline
\end{DoxyParams}
\Hypertarget{clock_8c_ada138812dfee19ee5451814039c13cf1}\index{clock.c@{clock.c}!\_toggle\_hsi\_clock@{\_toggle\_hsi\_clock}}
\index{\_toggle\_hsi\_clock@{\_toggle\_hsi\_clock}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{\_toggle\_hsi\_clock()}{\_toggle\_hsi\_clock()}}
{\footnotesize\ttfamily \label{clock_8c_ada138812dfee19ee5451814039c13cf1} 
void \+\_\+toggle\+\_\+hsi\+\_\+clock (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{state}{}\end{DoxyParamCaption})}

\Hypertarget{clock_8c_ac1565e93ef8448d4bb517652e8b85e27}\index{clock.c@{clock.c}!\_toggle\_pll\_clock@{\_toggle\_pll\_clock}}
\index{\_toggle\_pll\_clock@{\_toggle\_pll\_clock}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{\_toggle\_pll\_clock()}{\_toggle\_pll\_clock()}}
{\footnotesize\ttfamily \label{clock_8c_ac1565e93ef8448d4bb517652e8b85e27} 
void \+\_\+toggle\+\_\+pll\+\_\+clock (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{state}{}\end{DoxyParamCaption})}

\Hypertarget{clock_8c_ac405b089ad197ec8fcec53489064cb5f}\index{clock.c@{clock.c}!hal\_clock\_get\_ahbclk@{hal\_clock\_get\_ahbclk}}
\index{hal\_clock\_get\_ahbclk@{hal\_clock\_get\_ahbclk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_ahbclk()}{hal\_clock\_get\_ahbclk()}}
{\footnotesize\ttfamily \label{clock_8c_ac405b089ad197ec8fcec53489064cb5f} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+ahbclk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get the current AHB clock frequency. 

Get the AHB bus clock frequency.

Calculated as SYSCLK divided by AHB prescaler.

\begin{DoxyReturn}{Returns}
AHB bus clock frequency in Hertz. 
\end{DoxyReturn}
\Hypertarget{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8}\index{clock.c@{clock.c}!hal\_clock\_get\_apb1clk@{hal\_clock\_get\_apb1clk}}
\index{hal\_clock\_get\_apb1clk@{hal\_clock\_get\_apb1clk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_apb1clk()}{hal\_clock\_get\_apb1clk()}}
{\footnotesize\ttfamily \label{clock_8c_a2b3d3447fb02cf495b0c6f28ad9a4ae8} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+apb1clk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get the current APB1 clock frequency. 

Get the APB1 bus clock frequency.

Calculated as SYSCLK divided by APB1 prescaler.

\begin{DoxyReturn}{Returns}
APB1 bus clock frequency in Hertz. 
\end{DoxyReturn}
\Hypertarget{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5}\index{clock.c@{clock.c}!hal\_clock\_get\_apb2clk@{hal\_clock\_get\_apb2clk}}
\index{hal\_clock\_get\_apb2clk@{hal\_clock\_get\_apb2clk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_apb2clk()}{hal\_clock\_get\_apb2clk()}}
{\footnotesize\ttfamily \label{clock_8c_abe4fcf4dc3f2a13b1f2602c0348aeba5} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+apb2clk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get the current APB2 clock frequency. 

Get the APB2 bus clock frequency.

Calculated as SYSCLK divided by APB2 prescaler.

\begin{DoxyReturn}{Returns}
APB2 bus clock frequency in Hertz. 
\end{DoxyReturn}
\Hypertarget{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0}\index{clock.c@{clock.c}!hal\_clock\_get\_sysclk@{hal\_clock\_get\_sysclk}}
\index{hal\_clock\_get\_sysclk@{hal\_clock\_get\_sysclk}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_get\_sysclk()}{hal\_clock\_get\_sysclk()}}
{\footnotesize\ttfamily \label{clock_8c_aded3b01c0942294bcdd69a84f76d9cf0} 
uint32\+\_\+t hal\+\_\+clock\+\_\+get\+\_\+sysclk (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get the current system clock frequency in Hz. 

Get the system clock frequency (SYSCLK).

Detects the current SYSCLK source and calculates frequency based on configured clock source and PLL parameters.

\begin{DoxyReturn}{Returns}
SYSCLK frequency in Hertz. 
\end{DoxyReturn}
\Hypertarget{clock_8c_a0968882ff01fef583e6a8b7a97be51ea}\index{clock.c@{clock.c}!hal\_clock\_init@{hal\_clock\_init}}
\index{hal\_clock\_init@{hal\_clock\_init}!clock.c@{clock.c}}
\doxysubsubsection{\texorpdfstring{hal\_clock\_init()}{hal\_clock\_init()}}
{\footnotesize\ttfamily \label{clock_8c_a0968882ff01fef583e6a8b7a97be51ea} 
void hal\+\_\+clock\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structhal__clock__config__t}{hal\+\_\+clock\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{cfg}{, }\item[{\mbox{\hyperlink{structhal__pll__config__t}{hal\+\_\+pll\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{pll\+\_\+cfg}{}\end{DoxyParamCaption})}



Initialize the system clock. 


\begin{DoxyParams}{Parameters}
{\em cfg} & Pointer to the main clock configuration structure. \\
\hline
{\em pll\+\_\+cfg} & Pointer to the PLL configuration structure.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function must be called before using other peripheral clocks. 
\end{DoxyNote}
\texorpdfstring{$<$}{<} Flash Interface base address

\texorpdfstring{$<$}{<} Flash ACR Latency bit position

\texorpdfstring{$<$}{<} Flash ACR Latency bit position